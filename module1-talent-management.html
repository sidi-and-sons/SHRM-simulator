<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 1: Talent Management | SHRM-CP Simulation</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Talent Management</h1>
            <span class="week-badge">Week 10</span>
            <p>Navigate real-world talent acquisition, development, and retention challenges</p>
        </header>

        <!-- Start Screen -->
        <div id="startScreen" class="start-screen">
            <h2>Welcome to the Talent Management Simulation</h2>
            <div class="instructions">
                <h3>Instructions</h3>
                <ul>
                    <li>You will receive 8 inbox items requiring your response</li>
                    <li>Each item presents a realistic HR scenario</li>
                    <li>Select the best response from the options provided</li>
                    <li>You will receive immediate feedback after each selection</li>
                    <li>Each item is worth 12.5 points (100 points total)</li>
                    <li>You cannot change your answers once submitted</li>
                    <li>A summary will be provided at the end of the module</li>
                </ul>
            </div>
            <button class="btn btn-primary" onclick="startSimulation()">Begin Simulation</button>
        </div>

        <!-- Progress Bar -->
        <div id="progressContainer" class="progress-container hidden">
            <div class="progress-header">
                <span>Progress</span>
                <span id="progressText">0 of 8 completed</span>
            </div>
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
            </div>
        </div>

        <!-- Questions Container -->
        <div id="questionsContainer" class="hidden"></div>

        <!-- Summary Screen -->
        <div id="summaryContainer" class="summary-container">
            <div class="summary-header">
                <h2>Module Complete!</h2>
                <div class="final-score" id="finalScore">0</div>
                <div class="score-label">out of 100 points</div>
                <div id="gradeBadge" class="grade-badge"></div>
            </div>

            <h3 style="margin: 20px 0; color: #4fc3f7;">Your Responses</h3>
            <div id="summaryItems" class="summary-items"></div>

            <div class="nav-buttons" style="margin-top: 30px;">
                <button class="btn btn-secondary" onclick="window.print()">Print Results</button>
                <a href="index.html" class="btn btn-primary" style="text-decoration: none;">Return to Menu</a>
            </div>
        </div>
    </div>

    <script>
        // Simulation state
        let currentQuestion = 1;
        let totalQuestions = 8;
        let answers = {};
        let totalScore = 0;
        let shuffledOptions = {};

        // Question data
        const questions = [
            {
                id: 1,
                from: "Marcus Chen, Hiring Manager - Engineering",
                subject: "Urgent: Top Candidate Received Competing Offer",
                time: "Today, 9:15 AM",
                body: `Hi,<br><br>
                    Our top candidate for the Senior Developer position just informed me she received a competing offer with a 15% higher salary. She's exactly what we need and has skills that took us months to find. She needs an answer by end of day tomorrow. Our posted salary range is maxed out at what we offered. What should I do?<br><br>
                    Thanks,<br>
                    Marcus`,
                options: [
                    { id: 'A', text: "Request an urgent meeting with compensation and finance to explore total compensation adjustments including signing bonus, flexible work arrangements, or accelerated review timeline while emphasizing the role's growth potential.", score: 100, rating: 'excellent' },
                    { id: 'B', text: "Present a counter-offer focusing on non-monetary benefits such as professional development budget, additional PTO, and remote work flexibility, while being transparent about salary constraints.", score: 80, rating: 'good' },
                    { id: 'C', text: "Advise Marcus to have a conversation with the candidate about long-term career growth opportunities and company culture fit before making any commitments.", score: 60, rating: 'acceptable' },
                    { id: 'D', text: "Recommend letting the candidate go since exceeding the salary range could create internal equity issues with current employees.", score: 40, rating: 'poor' },
                    { id: 'E', text: "Tell Marcus to match the competing offer immediately to avoid losing the candidate, then figure out budget implications later.", score: 20, rating: 'problematic' }
                ],
                feedback: {
                    A: "Excellent approach. You're addressing the candidate's needs holistically while working within organizational constraints. Involving compensation and finance demonstrates strategic thinking, and exploring total rewards beyond base salary shows sophisticated talent acquisition skills.",
                    B: "Good response that creatively addresses salary limitations. Non-monetary benefits can be compelling differentiators, though you should also explore if any salary flexibility exists through proper channels.",
                    C: "Acceptable but passive. While discussing growth opportunities is valuable, time pressure requires more immediate action. The candidate may interpret delay as lack of interest.",
                    D: "This approach prioritizes policy over talent acquisition strategy. While equity concerns are valid, losing a strong candidate without exploring options is a missed opportunity that will cost more in continued vacancy and recruiting.",
                    E: "Problematic approach. Making commitments without budget approval undermines organizational trust and proper compensation governance. This could create legal and financial issues."
                }
            },
            {
                id: 2,
                from: "Jennifer Walsh, VP of Operations",
                subject: "Succession Planning Concern",
                time: "Today, 10:30 AM",
                body: `Hello,<br><br>
                    Two of my senior managers are retiring within the next 18 months, and I don't have anyone ready to step into their roles. I've been so focused on daily operations that I've neglected developing my team. I need a plan to identify and prepare potential successors quickly. How should I approach this?<br><br>
                    Best,<br>
                    Jennifer`,
                options: [
                    { id: 'A', text: "Implement a structured talent review process to assess current team members' potential, identify skill gaps, create individualized development plans, and consider job shadowing and stretch assignments with the retiring managers.", score: 100, rating: 'excellent' },
                    { id: 'B', text: "Recommend conducting a 9-box assessment of her team to identify high-potential employees and pairing them with the retiring managers for knowledge transfer over the next year.", score: 75, rating: 'good' },
                    { id: 'C', text: "Suggest posting the positions internally first to gauge interest and identify candidates who may be ready for promotion with some additional training.", score: 50, rating: 'acceptable' },
                    { id: 'D', text: "Advise her to start external recruiting now since 18 months isn't enough time to develop internal candidates for senior management roles.", score: 30, rating: 'poor' },
                    { id: 'E', text: "Tell her not to worry since 18 months is plenty of time and she can address this closer to the retirement dates.", score: 10, rating: 'problematic' }
                ],
                feedback: {
                    A: "Excellent comprehensive approach. This addresses immediate succession needs while building sustainable talent development practices. Combining assessment, development planning, and knowledge transfer maximizes the 18-month timeline.",
                    B: "Good structured approach using proven tools like the 9-box grid. Knowledge transfer with retiring managers is valuable, though a more comprehensive development plan would strengthen the approach.",
                    C: "Acceptable as a starting point but reactive. Internal posting alone doesn't develop candidates or ensure readiness. More proactive development planning is needed.",
                    D: "This underestimates internal talent potential and ignores knowledge transfer opportunities. External hires for senior roles often struggle without institutional knowledge the retiring managers possess.",
                    E: "Problematic response that demonstrates poor understanding of succession planning timelines. Developing senior leaders requires significant time and investment."
                }
            },
            {
                id: 3,
                from: "David Park, Team Lead - Customer Service",
                subject: "High Turnover in My Department",
                time: "Today, 11:45 AM",
                body: `Hi HR,<br><br>
                    We've lost 6 customer service reps in the past 4 months. Exit interviews mention "lack of growth opportunities" and "feeling undervalued." I'm constantly training new hires who leave within a year. This is affecting our service quality and team morale. What can we do to stop the bleeding?<br><br>
                    David`,
                options: [
                    { id: 'A', text: "Partner with David to create career pathways showing progression opportunities, implement a recognition program, conduct stay interviews with current employees, and review compensation competitiveness for the role.", score: 100, rating: 'excellent' },
                    { id: 'B', text: "Analyze exit interview data for patterns, benchmark salaries against market rates, and develop a retention strategy that addresses the specific concerns raised by departing employees.", score: 80, rating: 'good' },
                    { id: 'C', text: "Recommend implementing an employee recognition program and creating cross-training opportunities to provide variety and skill development.", score: 55, rating: 'acceptable' },
                    { id: 'D', text: "Suggest increasing starting salaries to attract better candidates who may stay longer, as turnover is often about compensation.", score: 35, rating: 'poor' },
                    { id: 'E', text: "Explain that high turnover is normal in customer service roles and focus on streamlining the onboarding process to train replacements faster.", score: 15, rating: 'problematic' }
                ],
                feedback: {
                    A: "Excellent comprehensive retention strategy. This addresses root causes identified in exit interviews while taking proactive steps with current employees. The multi-faceted approach shows strategic HR thinking.",
                    B: "Good data-driven approach that addresses the specific feedback from exit interviews. Benchmarking and targeted strategies show analytical thinking about retention.",
                    C: "Acceptable but limited. Recognition and cross-training help but don't address all concerns raised. Career pathways and compensation review are missing.",
                    D: "This misreads the exit interview data, which specifically mentioned growth and recognition - not just pay. Compensation alone rarely solves retention when development is the core issue.",
                    E: "Problematic response that normalizes a fixable problem. Accepting high turnover damages morale, service quality, and organizational knowledge. This signals HR is not a strategic partner."
                }
            },
            {
                id: 4,
                from: "Sarah Mitchell, Director of Marketing",
                subject: "Internal vs External Candidate Dilemma",
                time: "Today, 1:00 PM",
                body: `Hello,<br><br>
                    I'm hiring for a Marketing Manager position. I have an internal candidate, Tom, who's been with us 5 years and applied enthusiastically. He's solid but not exceptional. An external candidate has stronger qualifications and fresh ideas but would cost 20% more. If I hire externally, Tom will be devastated and might leave. How should I handle this?<br><br>
                    Sarah`,
                options: [
                    { id: 'A', text: "Conduct a thorough, objective assessment of both candidates against job requirements, then have an honest development conversation with Tom regardless of the outcome, creating a growth plan for him if not selected.", score: 100, rating: 'excellent' },
                    { id: 'B', text: "Recommend using a structured interview process with a diverse panel to evaluate both candidates fairly, ensuring Tom receives constructive feedback and a clear development path regardless of the decision.", score: 75, rating: 'good' },
                    { id: 'C', text: "Suggest giving Tom the opportunity first with a clear 90-day performance plan, with the understanding that expectations must be met.", score: 50, rating: 'acceptable' },
                    { id: 'D', text: "Advise hiring the external candidate since having the best talent is most important, and Tom will eventually get over it.", score: 30, rating: 'poor' },
                    { id: 'E', text: "Recommend promoting Tom to avoid losing a loyal employee, as five years of company knowledge is more valuable than outside experience.", score: 10, rating: 'problematic' }
                ],
                feedback: {
                    A: "Excellent balanced approach. Objective assessment ensures fair evaluation while the development conversation with Tom maintains engagement and shows commitment to internal talent regardless of outcome.",
                    B: "Good process-oriented approach that ensures fairness and provides constructive outcomes for both candidates. Structured interviews reduce bias and improve decision quality.",
                    C: "Acceptable but risky. Giving preference to internal candidates without full evaluation may result in a suboptimal hire. This also doesn't fully address Tom's development needs.",
                    D: "This ignores the cultural and morale implications of how the decision is communicated. The approach matters as much as the outcome for organizational trust.",
                    E: "Problematic approach that prioritizes avoiding difficult conversations over organizational effectiveness. Promoting underqualified candidates damages credibility and team performance."
                }
            },
            {
                id: 5,
                from: "Amanda Torres, HR Business Partner",
                subject: "Onboarding Process Feedback",
                time: "Today, 2:15 PM",
                body: `Hi,<br><br>
                    Recent new hire surveys show our onboarding gets poor ratings. Common complaints: "felt lost the first month," "my manager was too busy for me," and "unclear expectations." New hires are taking 6+ months to reach full productivity. Leadership wants this fixed but won't approve additional headcount for a dedicated onboarding team. Ideas?<br><br>
                    Amanda`,
                options: [
                    { id: 'A', text: "Design a structured 90-day onboarding framework with clear milestones, implement a buddy system using existing employees, create role-specific checklists for managers, and establish regular check-ins at 30/60/90 days.", score: 100, rating: 'excellent' },
                    { id: 'B', text: "Develop standardized onboarding checklists and training modules that managers can facilitate, paired with a peer mentor program to provide support without requiring additional HR headcount.", score: 80, rating: 'good' },
                    { id: 'C', text: "Create a self-service onboarding portal with resources, training videos, and FAQs that new hires can access independently during their first weeks.", score: 55, rating: 'acceptable' },
                    { id: 'D', text: "Recommend making managers accountable for onboarding through performance metrics, which will force them to prioritize new hire integration.", score: 35, rating: 'poor' },
                    { id: 'E', text: "Push back on leadership, explaining that effective onboarding requires dedicated resources and the current approach is the best possible without additional investment.", score: 15, rating: 'problematic' }
                ],
                feedback: {
                    A: "Excellent resource-efficient solution. The structured framework provides consistency, buddy systems leverage existing staff, and regular check-ins ensure accountability - all without additional headcount.",
                    B: "Good approach that distributes onboarding responsibilities effectively. Standardization and peer support address the core complaints while working within resource constraints.",
                    C: "Acceptable but insufficient alone. Self-service resources help but don't address the relationship-building and guided support new hires need. Technology supplements but doesn't replace human connection.",
                    D: "This approach may create resentment without providing managers the tools and training to succeed. Accountability without support often fails.",
                    E: "Problematic response that positions HR as unable to solve problems creatively. Effective onboarding is possible within constraints through process improvement and leveraging existing resources."
                }
            },
            {
                id: 6,
                from: "Robert Kim, Chief Technology Officer",
                subject: "Skills Gap in Development Team",
                time: "Today, 3:30 PM",
                body: `Hello,<br><br>
                    We're adopting cloud-native technologies, but most of my team has legacy system experience. Training everyone would be expensive and time-consuming. Hiring people with these skills is extremely competitive and costly. I need to close this skills gap within 12 months to meet our digital transformation goals. What's the best approach?<br><br>
                    Robert`,
                options: [
                    { id: 'A', text: "Recommend a blended approach: identify high-potential internal employees for intensive upskilling, strategically hire 2-3 experts who can mentor others, and partner with online learning platforms for scalable training.", score: 100, rating: 'excellent' },
                    { id: 'B', text: "Suggest conducting a skills assessment to identify team members with the strongest aptitude for cloud technologies, then invest in certifications and hands-on projects for this core group to become internal champions.", score: 75, rating: 'good' },
                    { id: 'C', text: "Propose using contractors or consultants initially for cloud projects while developing a longer-term training program for existing staff.", score: 50, rating: 'acceptable' },
                    { id: 'D', text: "Recommend focusing exclusively on external hiring since training existing employees takes too long and may not yield the expertise level required.", score: 30, rating: 'poor' },
                    { id: 'E', text: "Advise delaying the digital transformation timeline since 12 months is unrealistic for either training or hiring in the current market.", score: 10, rating: 'problematic' }
                ],
                feedback: {
                    A: "Excellent balanced strategy. Combining internal development with strategic external hiring creates sustainable capability building while meeting timeline pressures. This builds long-term organizational capacity.",
                    B: "Good approach that identifies internal talent for focused development. Creating internal champions enables peer learning and builds culture, though some external expertise may accelerate the timeline.",
                    C: "Acceptable short-term solution but doesn't build internal capability. Over-reliance on contractors can create knowledge dependency and doesn't address the long-term skills gap.",
                    D: "This approach is expensive, ignores valuable institutional knowledge, and may damage morale. It also assumes external hires will be available in a competitive market.",
                    E: "Problematic response that undermines strategic business objectives. HR should enable business goals, not advocate for delaying them. Creative solutions exist within constraints."
                }
            },
            {
                id: 7,
                from: "Lisa Brown, Recruiting Manager",
                subject: "Diversity in Candidate Pipeline",
                time: "Today, 4:00 PM",
                body: `Hi,<br><br>
                    Leadership has noticed our recent hires lack diversity. Looking at our data, our candidate pools are homogeneous from the start. Our job postings go to the same job boards, and we get referrals from our current (not diverse) workforce. I want to improve this but need guidance on effective, legal approaches. Suggestions?<br><br>
                    Lisa`,
                options: [
                    { id: 'A', text: "Expand sourcing channels to include diverse professional associations, HBCUs, and diversity-focused job boards; review job descriptions for biased language; implement blind resume screening; and train hiring managers on inclusive interviewing.", score: 100, rating: 'excellent' },
                    { id: 'B', text: "Partner with organizations serving underrepresented groups, use AI tools to remove biased language from postings, and ensure diverse interview panels while maintaining merit-based selection criteria.", score: 80, rating: 'good' },
                    { id: 'C', text: "Focus on building relationships with diverse professional networks and universities, and implement structured interviews to reduce unconscious bias in the selection process.", score: 55, rating: 'acceptable' },
                    { id: 'D', text: "Set diversity targets for each open position to ensure diverse candidates are included in final interview rounds.", score: 30, rating: 'poor' },
                    { id: 'E', text: "Prioritize hiring diverse candidates over equally qualified non-diverse candidates to quickly improve representation numbers.", score: 10, rating: 'problematic' }
                ],
                feedback: {
                    A: "Excellent comprehensive approach addressing the full recruitment pipeline. Expanding sourcing, removing bias from postings, and training interviewers creates systemic improvement while maintaining legal compliance and merit-based decisions.",
                    B: "Good multi-pronged approach that expands the candidate pool and reduces bias. Partnership with diverse organizations builds sustainable pipelines while structured processes ensure fairness.",
                    C: "Acceptable foundation for improving diversity through relationship building. However, this doesn't address potential bias in job descriptions or the interview process itself.",
                    D: "This approach risks legal issues if targets become quotas. Focusing on final rounds without addressing pipeline sources doesn't solve the root problem of homogeneous candidate pools.",
                    E: "Problematic and potentially illegal. Prioritizing candidates based on demographic characteristics violates equal employment opportunity laws and undermines merit-based hiring."
                }
            },
            {
                id: 8,
                from: "Michael Stevens, Department Manager",
                subject: "High Performer Requesting Transfer",
                time: "Today, 4:45 PM",
                body: `Hello,<br><br>
                    My top performer, Jessica, asked to transfer to another department to gain new experience. I really can't afford to lose her - she handles critical projects and mentors junior staff. But I also don't want her to feel stuck and leave the company entirely. She mentioned she's been approached by recruiters. How do I handle this without losing her completely?<br><br>
                    Michael`,
                options: [
                    { id: 'A', text: "Support the transfer request as part of her development, work with her on a transition timeline to document processes and train a successor, and frame this as an investment in retaining talent within the organization.", score: 100, rating: 'excellent' },
                    { id: 'B', text: "Have a career conversation with Jessica to understand her goals, explore whether a cross-functional project or temporary assignment could provide growth while maintaining her current role, and develop a succession plan.", score: 75, rating: 'good' },
                    { id: 'C', text: "Discuss with the receiving department about a gradual transition or part-time arrangement that allows Jessica to contribute to both areas during a transition period.", score: 50, rating: 'acceptable' },
                    { id: 'D', text: "Offer Jessica a promotion or raise to stay, emphasizing how valuable she is to the current team's success.", score: 30, rating: 'poor' },
                    { id: 'E', text: "Explain that transfers require manager approval and she needs to stay until her projects are complete and a replacement is found.", score: 10, rating: 'problematic' }
                ],
                feedback: {
                    A: "Excellent response that balances organizational and individual needs. Supporting career development while planning for succession demonstrates strategic talent management and increases likelihood of long-term retention.",
                    B: "Good approach that explores alternatives and understands motivations. Cross-functional opportunities may satisfy development needs while maintaining continuity, though blocking transfers risks flight.",
                    C: "Acceptable compromise that provides transition time. However, this may be seen as delay tactics if not paired with genuine support for Jessica's development goals.",
                    D: "This treats symptoms rather than causes. Jessica's desire is for growth and experience, not just money. Counter-offers often lead to departure within a year anyway.",
                    E: "Problematic response that prioritizes short-term operational needs over talent development. Blocking internal mobility is a leading cause of employee departure and damages employer brand."
                }
            }
        ];

        const itemTitles = [
            "Top Candidate Competing Offer",
            "Succession Planning",
            "High Department Turnover",
            "Internal vs External Candidate",
            "Onboarding Process",
            "Skills Gap in Team",
            "Diversity in Pipeline",
            "High Performer Transfer Request"
        ];

        // Shuffle array using Fisher-Yates algorithm
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Render a single question
        function renderQuestion(question, index) {
            const shuffledOpts = shuffleArray(question.options);
            shuffledOptions[question.id] = shuffledOpts;

            const isLast = index === questions.length - 1;
            const nextAction = isLast ? 'showSummary()' : `nextQuestion(${question.id + 1})`;
            const nextBtnText = isLast ? 'View Results' : 'Next Item';

            let optionsHtml = '';
            shuffledOpts.forEach((opt, idx) => {
                const letter = String.fromCharCode(65 + idx);
                optionsHtml += `
                    <button class="response-option" onclick="selectAnswer(${question.id}, '${opt.id}', ${opt.score}, '${opt.rating}')">
                        ${letter}) ${opt.text}
                    </button>
                `;
            });

            return `
                <div id="question${question.id}" class="question-container${index === 0 ? ' active' : ''}">
                    <div class="inbox-item">
                        <span class="item-number">Item ${question.id} of 8</span>
                        <div class="email-header">
                            <div class="email-icon">ðŸ“§</div>
                            <div class="email-meta">
                                <div class="email-from">${question.from}</div>
                                <div class="email-subject">${question.subject}</div>
                                <div class="email-time">${question.time}</div>
                            </div>
                        </div>
                        <div class="email-body">${question.body}</div>
                        <div class="response-options">${optionsHtml}</div>
                        <div id="feedback${question.id}" class="feedback-panel">
                            <div class="feedback-header">
                                <span class="feedback-label">Feedback</span>
                                <span class="feedback-score"></span>
                            </div>
                            <div class="feedback-text"></div>
                        </div>
                    </div>
                    <div class="nav-buttons">
                        <button id="nextBtn${question.id}" class="btn btn-primary" onclick="${nextAction}" disabled>${nextBtnText}</button>
                    </div>
                </div>
            `;
        }

        // Render all questions
        function renderQuestions() {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = questions.map((q, i) => renderQuestion(q, i)).join('');
        }

        function startSimulation() {
            renderQuestions();
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('progressContainer').classList.remove('hidden');
            document.getElementById('questionsContainer').classList.remove('hidden');
        }

        function selectAnswer(questionNum, answerId, score, rating) {
            if (answers[questionNum]) return;

            const question = questions.find(q => q.id === questionNum);

            answers[questionNum] = {
                answer: answerId,
                score: score,
                rating: rating,
                feedback: question.feedback[answerId]
            };

            totalScore += (score / 100) * 12.5;

            const options = document.querySelectorAll(`#question${questionNum} .response-option`);
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
                opt.style.opacity = '0.7';
            });

            event.target.classList.add(rating);
            event.target.style.opacity = '1';

            const feedbackPanel = document.getElementById(`feedback${questionNum}`);
            feedbackPanel.className = `feedback-panel show ${rating}`;
            feedbackPanel.querySelector('.feedback-score').textContent = `${score}% (${rating.charAt(0).toUpperCase() + rating.slice(1)})`;
            feedbackPanel.querySelector('.feedback-text').textContent = question.feedback[answerId];

            document.getElementById(`nextBtn${questionNum}`).disabled = false;
            updateProgress();
        }

        function updateProgress() {
            const completed = Object.keys(answers).length;
            const percentage = (completed / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = `${percentage}%`;
            document.getElementById('progressText').textContent = `${completed} of ${totalQuestions} completed`;
        }

        function nextQuestion(nextNum) {
            document.getElementById(`question${nextNum - 1}`).classList.remove('active');
            document.getElementById(`question${nextNum}`).classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showSummary() {
            document.getElementById('questionsContainer').classList.add('hidden');
            document.getElementById('progressContainer').classList.add('hidden');
            document.getElementById('summaryContainer').classList.add('show');

            const finalScore = Math.round(totalScore);
            document.getElementById('finalScore').textContent = finalScore;

            let grade, gradeClass;
            if (finalScore >= 90) { grade = 'A'; gradeClass = 'grade-a'; }
            else if (finalScore >= 80) { grade = 'B'; gradeClass = 'grade-b'; }
            else if (finalScore >= 70) { grade = 'C'; gradeClass = 'grade-c'; }
            else if (finalScore >= 60) { grade = 'D'; gradeClass = 'grade-d'; }
            else { grade = 'F'; gradeClass = 'grade-f'; }

            const gradeBadge = document.getElementById('gradeBadge');
            gradeBadge.textContent = `Grade: ${grade}`;
            gradeBadge.className = `grade-badge ${gradeClass}`;

            const summaryItems = document.getElementById('summaryItems');
            for (let i = 1; i <= totalQuestions; i++) {
                const answer = answers[i];
                const itemDiv = document.createElement('div');
                itemDiv.className = 'summary-item';
                itemDiv.innerHTML = `
                    <div class="summary-item-header">
                        <span class="summary-item-title">Item ${i}: ${itemTitles[i-1]}</span>
                        <span class="summary-item-score ${answer.rating}">${answer.score}%</span>
                    </div>
                    <div class="summary-item-response">Your answer: Option ${answer.answer}</div>
                    <div class="summary-item-feedback">${answer.feedback}</div>
                `;
                summaryItems.appendChild(itemDiv);
            }

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>
